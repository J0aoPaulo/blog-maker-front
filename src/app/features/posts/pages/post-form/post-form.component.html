<div class="max-w-xl mx-auto p-6 space-y-6">
  <div class="bg-white rounded-xl shadow-sm p-8">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">
      {{ isEdit ? 'Editar Post' : 'Novo Post' }}
    </h2>

    <form [formGroup]="form" (ngSubmit)="save()" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700">Título</label>
        <input formControlName="title" type="text"
              class="w-full px-4 py-3 mt-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"/>
        <small *ngIf="form.controls.title.invalid && form.controls.title.touched"
              class="text-red-600 text-xs">Informe ao menos 5 caracteres</small>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Conteúdo</label>
        <textarea formControlName="content" rows="6"
                  class="w-full px-4 py-3 mt-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"></textarea>
        <small *ngIf="form.controls.content.invalid && form.controls.content.touched"
              class="text-red-600 text-xs">Mínimo de 20 caracteres</small>
      </div>

      <!-- Seleção de Tema -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Tema</label>
        <div *ngIf="isLoadingThemes" class="text-sm text-gray-500 mt-1">
          Carregando temas...
        </div>
        <div *ngIf="errorLoadingThemes" class="text-sm text-red-500 mt-1">
          Erro ao carregar temas. Por favor, tente novamente.
        </div>
        <select
          *ngIf="!isLoadingThemes && !errorLoadingThemes"
          formControlName="themeId"
          class="w-full px-4 py-3 mt-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white"
        >
          <option [ngValue]="null">Selecione um tema (opcional)</option>
          <option *ngFor="let theme of themes" [ngValue]="theme.id">
            {{ theme.description }}
          </option>
        </select>
      </div>

      <div class="flex items-center gap-4 pt-4">
        <button type="submit"
                [disabled]="form.invalid"
                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors disabled:opacity-40">
          {{ isEdit ? 'Atualizar' : 'Publicar' }}
        </button>

        <!-- Usando routerLink no template -->
        <a
          [routerLink]="['/']"
          class="text-gray-600 hover:text-gray-800 font-medium"
        >
          Cancelar
        </a>
      </div>
    </form>
  </div>
</div>
